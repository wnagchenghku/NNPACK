
# make -j

# define the C compiler to use
CC = gcc

# define any compile-time flags
CFLAGS = -m32 -Wl,-hash-style=sysv -fno-stack-protector -fPIC -nostdlib -shared

INCLUDES = -I/root/NNPACK/include/ -I/root/NNPACK/deps/pthreadpool/include

default: so

.PHONY: dirs clean

dirs:
	/bin/mkdir -p objs/

clean:
	/bin/rm -rf *.so


obj := $(patsubst %.c, %.so, $(wildcard *.c))

so: $(obj)

%.so: %.c
	$(CC) $(CFLAGS) $(INCLUDES) $< -o $@
